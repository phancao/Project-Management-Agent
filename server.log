2025-11-05 09:20:04,248 - __main__ - INFO - Starting DeerFlow API server on localhost:8000
2025-11-05 09:20:04,248 - __main__ - INFO - Log level: INFO
2025-11-05 09:20:05,842 - src.graph.checkpoint - WARNING - Checkpoint saver is disabled
2025-11-05 09:20:05,872 - src.server.app - INFO - Allowed origins: ['http://localhost:3000']
INFO:     Started server process [57394]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:8000 (Press CTRL+C to quit)
INFO:     ::1:64008 - "GET /health HTTP/1.1" 404 Not Found
INFO:     ::1:64019 - "GET /docs HTTP/1.1" 200 OK
INFO:     ::1:64036 - "POST /api/chat/stream HTTP/1.1" 200 OK
2025-11-05 09:43:19,842 - src.config.configuration - INFO - Recursion limit set to: 30
2025-11-05 09:43:19,844 - src.graph.nodes - INFO - Coordinator talking.
2025-11-05 09:43:21,264 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-05 09:43:21,603 - src.graph.nodes - INFO - Handing off to planner
2025-11-05 09:43:21,604 - src.graph.nodes - INFO - Handing off to planner
2025-11-05 09:43:21,604 - src.graph.nodes - INFO - Using research topic for handoff: List 3 facts about Python programming
2025-11-05 09:43:21,606 - src.graph.nodes - INFO - background investigation node is running.
2025-11-05 09:43:22,510 - src.tools.tavily_search.tavily_search_results_with_images - ERROR - Tavily search returned error: 401 Client Error: Unauthorized for url: https://api.tavily.com/search
2025-11-05 09:43:22,511 - src.graph.nodes - ERROR - Tavily search error: HTTPError('401 Client Error: Unauthorized for url: https://api.tavily.com/search')
2025-11-05 09:43:22,512 - src.graph.nodes - INFO - Planner generating full plan
2025-11-05 09:43:23,242 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-05 09:43:26,942 - src.graph.nodes - INFO - Planner response: {
    "locale": "en-US",
    "has_enough_context": false,
    "thought": "The user is asking for facts about Python programming, which indicates a need for a deeper exploration into its features, history, and applications. I will gather comprehensive information to provide a detailed understanding of Python.",
    "title": "Python Programming Facts Research Plan",
    "steps": [
        {
            "need_search": true,
            "title": "Gather Historical Context and Features of Python",
            "description": "Collect detailed information about the history of Python, its key features, and notable versions/releases. Focus on its development, language philosophy, and design principles from reliable sources.",
            "step_type": "research"
        },
        {
            "need_search": true,
            "title": "Explore Python Applications and Community",
            "description": "Research the various applications of Python in industries such as web development, data science, and automation. Also, include information about the Python community, libraries, and frameworks that support development.",
            "step_type": "research"
        }
    ]
}
2025-11-05 09:43:26,943 - asyncio - ERROR - Exception in callback FuturesDict.on_done(PregelExecuta... subgraphs=[]))(<Task finishe...an_feedback')>)
handle: <Handle FuturesDict.on_done(PregelExecuta... subgraphs=[]))(<Task finishe...an_feedback')>)>
Traceback (most recent call last):
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/Volumes/Data 1/Project/Project-Management-Agent/.venv/lib/python3.12/site-packages/langgraph/pregel/runner.py", line 98, in on_done
    self.callback()(task, _exception(fut))  # type: ignore[misc]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not callable
INFO:     ::1:64082 - "POST /api/chat/stream HTTP/1.1" 200 OK
2025-11-05 09:43:34,270 - src.config.configuration - INFO - Recursion limit set to: 30
2025-11-05 09:43:34,271 - src.graph.nodes - INFO - Coordinator talking.
2025-11-05 09:43:35,210 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-05 09:43:35,656 - src.graph.nodes - INFO - Handing off to planner
2025-11-05 09:43:35,656 - src.graph.nodes - INFO - Handing off to planner
2025-11-05 09:43:35,656 - src.graph.nodes - INFO - Using research topic for handoff: Research the benefits of using LangGraph for multi-agent systems
2025-11-05 09:43:35,657 - src.graph.nodes - INFO - background investigation node is running.
2025-11-05 09:43:36,516 - src.tools.tavily_search.tavily_search_results_with_images - ERROR - Tavily search returned error: 401 Client Error: Unauthorized for url: https://api.tavily.com/search
2025-11-05 09:43:36,516 - src.graph.nodes - ERROR - Tavily search error: HTTPError('401 Client Error: Unauthorized for url: https://api.tavily.com/search')
2025-11-05 09:43:36,522 - src.graph.nodes - INFO - Planner generating full plan
2025-11-05 09:43:37,171 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [57394]
2025-11-05 09:43:42,544 - __main__ - INFO - Received shutdown signal. Starting graceful shutdown...
2025-11-05 09:43:42,544 - asyncio - ERROR - Exception in callback FuturesDict.on_done(PregelExecuta... subgraphs=[]))(<Task cancell...retry.py:105>>)
handle: <Handle FuturesDict.on_done(PregelExecuta... subgraphs=[]))(<Task cancell...retry.py:105>>)>
Traceback (most recent call last):
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/base_events.py", line 678, in run_until_complete
    self.run_forever()
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/base_events.py", line 645, in run_forever
    self._run_once()
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/base_events.py", line 1999, in _run_once
    handle._run()
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/Volumes/Data 1/Project/Project-Management-Agent/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 69, in serve
    with self.capture_signals():
         ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/Volumes/Data 1/Project/Project-Management-Agent/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
  File "/Volumes/Data 1/Project/Project-Management-Agent/server.py", line 40, in handle_shutdown
    sys.exit(0)
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/phancao/.local/share/uv/python/cpython-3.12.12-macos-aarch64-none/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/Volumes/Data 1/Project/Project-Management-Agent/.venv/lib/python3.12/site-packages/langgraph/pregel/runner.py", line 98, in on_done
    self.callback()(task, _exception(fut))  # type: ignore[misc]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not callable
2025-11-05 09:43:42,852 - src.graph.nodes - INFO - Planner response: {
    "locale": "en-US",
    "has_enough_context": false,
    "thought": "To effectively understand the benefits of using LangGraph for multi-agent systems, we need to gather comprehensive data about its features, applications, and advantages over other frameworks, analyze case studies and expert opinions, and explore statistical data related to performance improvements and efficiency in multi-agent systems.",
    "title": "LangGraph Research Plan for Multi-Agent Systems",
    "steps": [
        {
            "need_search": true,
            "title": "LangGraph Features and Advantages",
            "description": "Collect information on the specific features of LangGraph, including how it facilitates communication between agents, promotes collaboration, and any unique capabilities that enhance multi-agent system performance. Focus on expert evaluations and comparative benefits over other systems.",
            "step_type": "research"
        },
        {
            "need_search": true,
            "title": "Applications of LangGraph in Multi-Agent Systems",
            "description": "Research case studies and documented applications of LangGraph in different multi-agent systems scenarios. Include insights on how organizations are leveraging LangGraph to solve complex tasks and improve system efficiency.",
            "step_type": "research"
        },
        {
            "need_search": false,
            "title": "Analyze Potential Impacts of LangGraph",
            "description": "Analyze collected data to identify key metrics such as performance improvements, scalability, and efficiency gains reported in the literature regarding the use of LangGraph in multi-agent systems. Highlight both quantitative and qualitative outcomes.",
            "step_type": "processing"
        }
    ]
}
